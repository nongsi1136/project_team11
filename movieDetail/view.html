<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Atcha</title>
    <link rel="stylesheet" href="detail.css" />

    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.1/dist/css/bootstrap.min.css"
      rel="stylesheet"
      integrity="sha384-4bw+/aepP/YC94hEpVNVgiZdgIC5+VKNBQNGCHeKRQN+PtmoHDEXuppvnDJzQIu9"
      crossorigin="anonymous"
    />
  </head>

  <body>
    <header class="Header">
      <!-- 헤더 왼쪽 몰기-->
      <div class="headerLeft">
        <h1 class="headerContainer">Atcha Pedia</h1>
        <nav class="headerContainer">
          <ul class="headerItem">
            <li class="headerItemlist"><a href="#">영화</a></li>
            <li class="headerItemlist"><a href="#">시리즈</a></li>
            <li class="headerItemlist"><a href="#">장르</a></li>
          </ul>
        </nav>
      </div>

      <!-- 헤더 오른쪽 몰기-->
      <div class="HeaderRight">
        <nav class="headerContainer">
          <ul class="headerItem">
            <li class="headerItemlist">
              <input type="text" placeholder="이 곳에 영화를 검색 해보세요 !" />
            </li>
            <li class="headerItemlist"><button>검색</button></li>
            <li class="headerItemlist"><a href="#">로그인</a></li>
            <li class="headerItemlist"><a href="#">회원 가입</a></li>
          </ul>
        </nav>
      </div>
    </header>

    <!-- <section> -->
    <!-- 메인 중앙 영화 이미지 -->
    <article class="mainCenter">
      <div>
        <p>영화이미지</p>
        <p>연도/ 장르 설명</p>
        <p>상영 시간</p>
      </div>
    </article>

    <div class="Leftright">
      <!-- 왼쪽 영화 포스터 및 간단 설명 -->
      <aside class="leftPoster">
        <div>
          <h2>여어어엉화아아</h2>
          <div><img src="green.jpg" alt="" style="width: 300px" /></div>
          <p>영화 평점</p>
        </div>
      </aside>

      <!-- 오른쪽 영화 상세 내용 표시 -->
      <article class="rightContent">
        <div>
          <div>
            <p>영화 별점 주기</p>
            <p>평균 별점</p>
          </div>
          <div>
            <p>찜하기</p>
            <p>코멘트</p>
          </div>
          <div>
            <p>영화 내용----상세 설명</p>
            <p>영화 예고편</p>
            <iframe
              width="560"
              height="315"
              src="https://www.youtube.com/embed/DKe0-yHepZo?si=znH2gwgiwrKzljB_"
              title="YouTube video player"
              frameborder="0"
              allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share"
              allowfullscreen
            >
            </iframe>
          </div>
        </div>
      </article>
    </div>
    <!-- </section> -->

    <!-- 출연/ 제작 카드 리스트 -->
    <section>
      <div>
        <div class="Cast">
          <h2>제작/출연자</h2>
        </div>
      </div>
      <div class="cast-all" id="cast-all-container">
        <div class="cast-container">
          <div class="cast-items" id="cast-all-info">
            <div class="cast-itemImg">
              <div class="cast-item"><img src="bogh.jpg" class="img-size" /></div>
            </div>
            <div class="cast-itemInfo">
              <div class="cast-item">출연진</div>
              <div class="cast-item">역할</div>
            </div>
          </div>
        </div>
      </div>
    </section>

    <!-- 코멘트 카드 리스트-->
    <div>
      <div class="comment-list">
        <h2>코멘트</h2>
      </div>
    </div>

    <!-- 아이디/비밀번호/리뷰 등록창-->
    <div>
      <div class="Idpw">
        <p>아이디 : <input type="text" id="userID" placeholder="6~10자리로 입력해 주세요." /></p>
        <p>비밀번호 : <input type="text" id="userPW" placeholder="4자리 숫자로 입력해 주세요." /></p>
      </div>

      <!-- 별점 -->
      <!-- <span> -->
      <div class="Ment">
        <legend>당신의 별점은?</legend>
      </div>
      <!-- 별점 체크 -->
      <div class="Star">
        <input type="radio" name="reviewStar" value="★" id="rate1" /><label for="rate1">★</label>
        <input type="radio" name="reviewStar" value="★★" id="rate2" /><label for="rate2">★★</label>
        <input type="radio" name="reviewStar" value="★★★" id="rate3" /><label for="rate3">★★★</label>
        <input type="radio" name="reviewStar" value="★★★★" id="rate4" /><label for="rate4">★★★★</label>
        <input type="radio" name="reviewStar" value="★★★★★" id="rate5" /><label for="rate5">★★★★★</label>
      </div>

      <!-- 코멘트 입력 -->
      <p>
        감상 :
        <input
          type="text"
          class="inputComment"
          id="userRV"
          placeholder="여러분의 감상을 남겨주세요 !(50자 이상, 1,000자 이하)"
        />
      </p>

      <!-- 최종 -->
      <p><button id="ToWriteButton">등록하기/수정하기</button></p>
      <p><button id="ToDeleteButton">삭제하기</button></p>
      <!-- </span> -->

      <!-- 리뷰카드 리스트 -->
      <div class="commentList"></div>

    <!-- 바닥글 -->
    <footer class="foot">
      <nav class="footCcontainer">
        <li class="footItem"><a href="#">홈으로</a></li>
        <li class="footItem">고객 센터</li>
        <li class="footItem">문의 하기</li>
      </nav>
      <p>Copyright © 2024 Node.js_4기 2주차 11조 All rights reserved.</p>
      <address>Contact webmaster for more information. https://github.com/ooommma/team11</address>
    </footer>
    
    <script src="view.js"></script>
    <script type="module">
      import {validationCheckID, validationCheckPW, validationCheckRV} from './validationCheck.js'
      function creatingReview() {
        let id = document.querySelector("#userID").value;
        let password = document.getElementById("userPW").value;
        let stars = document.querySelector('input[name="reviewStar"]:checked').value;
        let review = document.getElementById("userRV").value;

        validationCheckID(id);
        validationCheckPW(password);
        validationCheckRV(review);


        let userInfo = JSON.stringify({
          name: id,
          password,
          stars,
          review
        });

        localStorage.setItem(id, userInfo);
        console.log(`계정이 생성되었습니다. ${userInfo}`);

        document.querySelector("#userID").value = "";
        document.getElementById("userPW").value = 0;
        document.getElementById("userRV").value = "";
        location.reload();
      }

      function gettingReview() {
        for (let i = 0; i < localStorage.length; i++) {
          let key = localStorage.key(i);
          let result = (key === null || key === undefined) ? localStorage.removeItem(key) : localStorage.getItem(key);
          const gettingValue = JSON.parse(result);
          const temp_html = `
            <div class="comment-all" id="comment-all-container">
                <div class="comment-container">
                      <div class="comment-items" id="comment-all-info">
                        <div class="comment-ID">
                          <div class="comment-item">ID ${gettingValue.name}</div>
                        <div class="comment-Info">
                          <div class="comment-item">별점 ${gettingValue.stars}</div>
                          <div class="comment-item">코멘트 ${gettingValue.review}</div>
                        </div>
                      </div>
                  </div>
              </div>
        </div>
        `;

          document.querySelector(".commentList").innerHTML += temp_html;
        }
      }

      document.querySelector("#ToWriteButton").addEventListener("click", creatingReview);

      document.querySelector("#ToDeleteButton").addEventListener("click",  () => {
        const id = document.querySelector("#userID").value;
        const password = Number(document.getElementById("userPW").value);
        if (
          JSON.parse(localStorage.getItem(id)).name === id &&
          JSON.parse(localStorage.getItem(id)).password === password
        ) {
          localStorage.removeItem(id);
        }
        // location.reload();
      });

      gettingReview();
    </script>
  </body>
</html>
